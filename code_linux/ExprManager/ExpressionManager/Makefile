SS = ..

include $(SS)/Makefile.include

INFERENCERULE_LEXER = inferencerule_parser
INFERENCERULE_PARSER = inferencerule_parser
YACC_UTILS = yacc_utils



BVLIB_DIR = .


PREFIX = inferencerule_parser

build :  $(EXPRESSIONASDAG).o $(EXPRESSION).o   $(EXPRESSION_MANAGER).o  $(INFERTYPE_EXPRESSION).o $(EXPRESSION_EVALUATOR).o $(EXPRESSION_VALUE).o $(INVALID_BIT_MANAGER).o $(BVFNS).o $(INFERENCERULE_PARSER).tab.o $(INFERENCERULE_LEXER).yy.o

$(EXPRESSION_VALUE).o: $(EXPRESSION_VALUE).cc
	$(CC) $(CFLAGS)  $(EXPRESSION_VALUE).cc $(EXPRESSION_VALUE).h  -I $(DAG_MANAGER_DIR) -I $(HASHTABLE_MANAGER_DIR) -I $(COMMON_DIR) -I $(LOGMANAGER_DIR) -I $(COMMAND_OPTIONS_DIR)

$(EXPRESSION_MANAGER).o : $(EXPRESSION_MANAGER).h $(EXPRESSION_MANAGER).cc
	$(CC) $(CFLAGS) $(EXPRESSION_MANAGER).cc -I $(SS)/CDFG -I $(DAG_MANAGER_DIR) -I $(HASHTABLE_MANAGER_DIR) -I $(COMMON_DIR) -I $(BVLIB_DIR) -I $(LOGMANAGER_DIR) -I $(COMMAND_OPTIONS_DIR)

$(EXPRESSION).o : $(EXPRESSION).cc
	$(CC) $(CFLAGS) $(EXPRESSION).cc $(EXPRESSION).h -I $(DAG_MANAGER_DIR) -I $(HASHTABLE_MANAGER_DIR) -I $(COMMON_DIR) -I $(BVLIB_DIR) -I $(LOGMANAGER_DIR) -I $(COMMAND_OPTIONS_DIR)

$(EXPRESSIONASDAG).o : $(EXPRESSIONASDAG).cc
	$(CC) $(CFLAGS) $(EXPRESSIONASDAG).cc -I $(DAG_MANAGER_DIR) -I $(HASHTABLE_MANAGER_DIR) -I $(COMMON_DIR) -I $(BVLIB_DIR) -I $(LOGMANAGER_DIR) -I $(COMMAND_OPTIONS_DIR)

$(EXPRESSION_EVALUATOR).o : $(EXPRESSION_EVALUATOR).cc
	$(CC) $(CFLAGS) $(EXPRESSION_EVALUATOR).cc $(EXPRESSION_EVALUATOR).h -I $(DAG_MANAGER_DIR) -I $(HASHTABLE_MANAGER_DIR) -I $(COMMON_DIR) -I $(BVLIB_DIR) -I $(LOGMANAGER_DIR) -I $(COMMAND_OPTIONS_DIR)

$(INVALID_BIT_MANAGER).o: $(INVALID_BIT_MANAGER).cc
	$(CC) $(CFLAGS) $(INVALID_BIT_MANAGER).cc $(INVALID_BIT_MANAGER).h -I $(DAG_MANAGER_DIR) -I $(HASHTABLE_MANAGER_DIR) -I $(COMMON_DIR) -I $(LOGMANAGER_DIR)

$(INFERTYPE_EXPRESSION).o: $(INFERTYPE_EXPRESSION).cc
	$(CC) $(CFLAGS) $(INFERTYPE_EXPRESSION).cc -I $(COMMON_DIR) -I $(DAG_MANAGER_DIR) -I $(HASHTABLE_MANAGER_DIR) -I $(COMMON_DIR) -I $(BVLIB_DIR) -I $(LOGMANAGER_DIR) -I $(COMMAND_OPTIONS_DIR)


$(INFERENCERULE_PARSER).tab.o : $(INFERENCERULE_PARSER).tab.c
	$(CC) $(CFLAGS)  $(INFERENCERULE_PARSER).tab.c $(COMMON_DIR)/helping_functions.h -I $(DAG_MANAGER_DIR) -I $(HASHTABLE_MANAGER_DIR) -I $(COMMON_DIR) -I $(BVLIB_DIR) -I $(LOGMANAGER_DIR) -I $(COMMAND_OPTIONS_DIR)

$(INFERENCERULE_PARSER).tab.c : $(INFERENCERULE_PARSER).y
	$(YACC) $(YFLAGS) -b $(PREFIX) -p $(PREFIX) $(INFERENCERULE_PARSER).y 

$(INFERENCERULE_LEXER).yy.o : $(INFERENCERULE_LEXER).yy.c $(INFERENCERULE_PARSER).tab.h 
	$(CC) $(CFLAGS) $(INFERENCERULE_LEXER).yy.c $(INFERENCERULE_PARSER).tab.h

$(INFERENCERULE_LEXER).yy.c : $(INFERENCERULE_LEXER).l 
	$(LEX) -o$(PREFIX).yy.c -P$(PREFIX) $(INFERENCERULE_LEXER).l

$(BVFNS).o : $(BVFNS).cc
	$(CC) $(CFLAGS) $(BVFNS).cc -I $(COMMON_DIR)

clean:
	rm -f *.o *.gch *.tab.* *.h.gch
